<div class="reset-password-container">
    <div class="reset-password-card">
        <h4>Reset Password</h4>
        <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
            <!-- New Password -->
            <div class="mb-3">
                <label for="newPassword" class="form-label">New Password <span class="required">*</span></label>
                <div class="input-group">
                    <input [type]="showNewPassword ? 'text' : 'password'" class="form-control" id="newPassword"
                        formControlName="newPassword" placeholder="Enter new password" />
                    <span class="input-group-text" (click)="togglePasswordVisibility('new')">
                        <i class="bx" [ngClass]="showNewPassword ? 'bx-hide' : 'bx-show'"></i>
                    </span>
                </div>
                <div *ngIf="resetPasswordForm.get('newPassword')?.touched && resetPasswordForm.get('newPassword')?.invalid"
                    class="text-danger">
                    <small *ngIf="resetPasswordForm.get('newPassword')?.errors?.['required']">New password is
                        required.</small>
                    <small *ngIf="resetPasswordForm.get('newPassword')?.errors?.['minlength']">Password must be at least
                        6 characters long.</small>
                </div>
            </div>

            <!-- Confirm Password -->
            <div class="mb-3">
                <label for="confirmPassword" class="form-label">Confirm Password <span class="required">*</span></label>
                <div class="input-group">
                    <input [type]="showConfirmPassword ? 'text' : 'password'" class="form-control" id="confirmPassword"
                        formControlName="confirmPassword" placeholder="Confirm new password" />
                    <span class="input-group-text" (click)="togglePasswordVisibility('confirm')">
                        <i class="bx" [ngClass]="showConfirmPassword ? 'bx-hide' : 'bx-show'"></i>
                    </span>
                </div>
                <div *ngIf="resetPasswordForm.get('confirmPassword')?.touched && resetPasswordForm.get('confirmPassword')?.invalid"
                    class="text-danger">
                    <small *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['required']">Please confirm your
                        new password.</small>
                </div>
                <div *ngIf="resetPasswordForm.errors?.['mismatch'] && resetPasswordForm.get('confirmPassword')?.touched"
                    class="text-danger">
                    <small>Passwords do not match.</small>
                </div>
            </div>

            <!-- Error Message -->
            <div *ngIf="errorMessage" class="text-danger mb-3">
                <small>{{ errorMessage }}</small>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary w-100" [disabled]="resetPasswordForm.invalid || isLoading">
                <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status"
                    aria-hidden="true"></span>
                {{ isLoading ? 'Resetting...' : 'Reset Password' }}
            </button>
        </form>
    </div>
</div>